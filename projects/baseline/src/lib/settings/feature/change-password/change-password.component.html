<h2 class="text-lg font-medium">Password</h2>

<div class="flex gap-4 w-full my-2 items-center">
    <i class="pi pi-lock" style="font-size: 2rem"></i>

    <div class="flex flex-col">
        <div class="flex items-center gap-4">
            <div class="flex flex-col">
                <span class="font-medium">Strong passwords are vital for security. </span>
                <span class="text-sm">Changing them regularly limits the lifespan of compromised credentials and enhances overall protection.</span>
            </div>

            <base-button
                [icon]="expanded ? 'pi pi-times' : 'pi pi-pen-to-square'"
                [label]="expanded ? 'Cancel' : 'Change'"
                (onClick)="toggle()"
                [loading]="editLoading"
            />
        </div>

        <div
            *ngIf="expanded"
            class="flex gap-2 flex-col"
        >
            <base-divider/>
            <span>Please your current and new password.</span>
            <form
                [formGroup]="form"
                class="flex gap-4 w-full items-center"
                (ngSubmit)="submit()"
            >
                <div class="flex flex-col w-full gap-4">
                    <base-input
                        class="w-full"
                        label="Current Password"
                        type="password"
                        formControlName="oldPassword"
                        [displayWarning]="oldPassword.getError('wrong')"
                        warning="Wrong password"
                        autocomplete="current-password"
                        [invalid]="oldPassword.getError('wrong') || (form.invalid && oldPassword.touched)"
                    />
                    <base-input
                        class="w-full"
                        label="New Password"
                        type="password"
                        formControlName="newPassword"
                        [invalid]="form.invalid && oldPassword.touched"
                    />
                </div>

                <base-button
                    [label]="'Update'"
                    type="submit"
                    [loading]="updateLoading"
                    [disabled]="form.invalid"
                />
            </form>
        </div>
    </div>

</div>
